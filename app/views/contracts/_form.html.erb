<% controller.action_name == "new" ? action = "create" : action = "update" %>
<% controller.action_name == "new" ? method = :post : method = :put %>
<% controller.action_name == "new" ? title = @new_title : title = @contract.title %>

<%= form_for @contract, :url => { :action => action }, :method => method do |f| %>
  <%= f.hidden_field :project_id, :value => @project.id %>
  <div>
    <p><%= f.label :title %></p>
    <p><%= f.text_field :title, :value => title, :size => 50 %></p>
  </div>
  <div>
    <p><%= f.label :description %></p>
    <p><%= f.text_area :description, { :cols => 50, :rows => 3 } %></p>
  </div>
  <div>
    <p><%= f.label l(:field_agreement_date) %></p>
    <p><%= f.date_select :agreement_date %></p>
  </div>
  <div>
    <p><%= f.label l(:field_start_date) %></p>
    <p><%= f.date_select :start_date %></p>
  </div>
  <div>
    <p><%= f.label l(:field_end_date) %></p>
    <p><%= f.date_select :end_date %></p>
  </div>
  <div>
    <p><%= f.label l(:field_purchase_amount) %></p>
    <p><%= l('number.currency.format.unit') if l('number.currency.format.format').index('%u') == 0 %> <%= f.text_field :purchase_amount, :size => 10 %> <%= l('number.currency.format.unit') if l('number.currency.format.format').index('%u') != 0 %></p>
  </div>
  <div>
    <p><%= f.label l(:field_hourly_rate) %></p>
    <p><%= l('number.currency.format.unit') if l('number.currency.format.format').index('%u') == 0 %> <%= f.text_field :hourly_rate, :size => 10 %> <%= l('number.currency.format.unit') if l('number.currency.format.format').index('%u') != 0 %></p>
  </div>
  <div>
    <p><%= f.label l(:field_contract_url) %></p>
    <p><%= f.text_field :contract_url, :size => 50 %></p>
  </div>
  <div>
    <p><%= f.label l(:field_invoice_url) %></p>
    <p><%= f.text_field :invoice_url, :size => 50 %></p>
  </div>
  <div>
    <% controller.action_name == "new" ? msg = l(:label_create_contract) : msg = l(:label_update_contract) %>
    <p><%= f.submit msg  %></p>
  </div>
<% end %>
